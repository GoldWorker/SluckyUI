(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{"M0l+":function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n("q1tI"),o=function(e){return e&&e.__esModule?e:{default:e}}(i);var u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":r(t))&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":r(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.Component),a(t,[{key:"handleValid",value:function(e,t,n){return e||void 0===e?t:n}},{key:"render",value:function(){var e=this.props,t=e.handleInputChange,n=e.data,r=e.name,a=e.placeholder;return o.default.createElement("div",{className:"input pt8"},o.default.createElement("label",{htmlFor:r+"register",className:"fs12 c-grey"},r),o.default.createElement("br",null),o.default.createElement("input",{id:r+"register",onChange:t,type:"text",className:"input-normal w288",placeholder:a,maxLength:"32",style:this.handleValid(n.isValid,{borderColor:"rgba(0, 0, 0, 0.12)"},{borderColor:"#e74c3c"}),required:!0}),o.default.createElement("br",null),o.default.createElement("span",{className:"input-ps fs12",style:this.handleValid(n.isValid,{opacity:"0"},{opacity:"1"})},n.message.map(function(e){return e+" "})))}}]),t}();u.defaultProps={data:{message:[]}},t.default=u},MMoa:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("/MKj"),a=function(e){return e&&e.__esModule?e:{default:e}}(n("uD5W")),i=n("YC0n");t.default=(0,r.connect)(function(e){return{}},function(e){return{handleVerifyCodeSend:function(t){return e((0,i.verifyEmail)({email:t}))},registerConfirm:function(t){return e((0,i.register)(t))}}})(a.default)},YC0n:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.register=t.verifyEmail=void 0;var r=function(e){return e&&e.__esModule?e:{default:e}}(n("LpSC")),a=n("vKzh"),i=n("NRnq");t.verifyEmail=function(e){return function(t){t((0,a.pushInQueue)({info:"邮件发送中",flag:"hint"})),(0,r.default)(__API__.postVerifyEmail,{method:"POST",credentials:"include",body:JSON.stringify(e)}).then(function(e){return e.json()}).then(function(e){e.error?t((0,a.pushInQueue)({info:"请确认邮箱是否正确或请查看邮箱里的验证码",flag:"hint"})):(t(function(e){return{type:"VERIFY_EMAIL_SUCCESS",info:e}}(e)),t((0,a.pushInQueue)({info:"发送成功，请查看邮箱里的验证码",flag:"success"})))}).catch(function(e){if(e)throw e;t((0,a.pushInQueue)({info:"请网络检查网络连接",flag:"warning"}))})}},t.register=function(e){return function(t){return(0,r.default)(__API__.postRegister,{method:"POST",credentials:"include",body:JSON.stringify(e)}).then(function(e){return e.json()}).then(function(e){e.error?t((0,a.pushInQueue)({info:e.error,flag:"hint"})):(t(function(e){return{type:"REGISTER_SUCCESS",info:e}}(e)),t((0,a.pushInQueue)({info:"恭喜，注册成功",flag:"success"})))}).catch(function(e){if(e)throw e;t((0,a.pushInQueue)({info:"请网络检查网络连接",flag:"warning"}))})}};(0,i.addReducer)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];switch(t.type){case"VERIFY_EMAIL_SUCCESS":case"REGISTER_SUCCESS":return Object.assign({},e,{info:t.info});default:return e}},"registerReducer")},"k+YS":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={config:{},types:{},result:{},data:{},getConfig:function(){return this.config},validate:function(e){for(var t in this.data=e,this.result={},e)if(e.hasOwnProperty(t)){var n=e[t],r=this.validateOne(t,n);r&&(this.result[t]=r)}return this.result},validateOne:function(e,t){var n=this.config[e];if(!n)return!1;var r={key:e,isValid:!0,message:[]};return n.map(function(e,n){if(!this.types[e].validate.call(this,t)){var a=this.types[e].instruction;r.isValid=!1,r.message.push(a)}}.bind(this)),r},isSubmit:function(){for(var e in this.config)if(void 0==this.result[e]||!this.result[e].isValid)return!1;return!0}};r.types.isEmpty={validate:function(e){return""!==e},instruction:"不能为空"},r.types.isName={validate:function(e){return/^[\u4E00-\u9FA5A-Za-z0-9_]{1,10}$/.test(e)},instruction:"十个字以内，不能包含特殊字符"},r.types.isEmail={validate:function(e){return/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/.test(e)},instruction:"邮箱格式不正确"},r.types.isPw={validate:function(e){return/^[!@#$%^&*_A-Za-z0-9]{8,15}$/.test(e)},instruction:"由数组，字母，_@#$等组成，不少于8位"},r.types.isPwAgain={validate:function(e){return!!this.data.password&&this.data.password==e},instruction:"重复输入的密码不相同"},r.types.isValidString={validate:function(e){return!isNaN(e)},instruction:"invail Number value"},t.default=r},uD5W:function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n("q1tI"),o=c(i),u=c(n("k+YS")),l=c(n("M0l+")),s=c(n("xsyd")),f=c(n("J21I"));function c(e){return e&&e.__esModule?e:{default:e}}var d=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":r(t))&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={data:{email:"",emailVerifyCode:"",name:"",password:"",passwordAgain:""},result:{}},u.default.config={email:["isEmpty","isEmail"],emailVerifyCode:["isEmpty"],name:["isName","isEmpty"],password:["isEmpty","isPw"],passwordAgain:["isEmpty","isPwAgain"]},n.registerConfirm=n.props.registerConfirm.bind(n),n.handleVerifyCodeSend=n.props.handleVerifyCodeSend.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":r(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.Component),a(t,[{key:"handleInputChange",value:function(e,t){var n=this.state.data;n[e]=t.target.value,this.setState({data:n})}},{key:"handleFormConfirm",value:function(e){e.preventDefault();var t=this.state.data,n=u.default.validate(t);this.setState({result:n}),u.default.isSubmit()&&this.registerConfirm(this.state.data)}},{key:"handleEmailSend",value:function(){var e=this.state.data.email,t=u.default.validateOne("email",e);this.setState({result:{email:t}}),t.isValid&&this.handleVerifyCodeSend(e)}},{key:"render",value:function(){return o.default.createElement("div",{className:"register-container"},o.default.createElement("div",{className:"register-mark"}),o.default.createElement(f.default,{transitionName:"example",transitionAppear:!0,transitionAppearTimeout:500,transitionEnter:!1,transitionLeave:!1},o.default.createElement("form",{className:"paper shadow p32 register-item svgMutiLine p-r",key:"registerForm"},o.default.createElement("p",{className:"ta-c mb4 mt0"},o.default.createElement("strong",null,"注册")),o.default.createElement(s.default,{btnText:"发送",handleInputChange:this.handleInputChange.bind(this,"email"),handleBtnClick:this.handleEmailSend.bind(this),name:"邮箱",placeholder:"\r 常用邮箱",data:this.state.result.email}),o.default.createElement("br",null),o.default.createElement(l.default,{handleInputChange:this.handleInputChange.bind(this,"emailVerifyCode"),name:"验证码",placeholder:"\r 输入邮箱里的验证码",data:this.state.result.emailVerifyCode}),o.default.createElement("br",null),o.default.createElement(l.default,{handleInputChange:this.handleInputChange.bind(this,"name"),name:"昵称",placeholder:"\r 不能含有标点",data:this.state.result.name}),o.default.createElement("br",null),o.default.createElement(l.default,{handleInputChange:this.handleInputChange.bind(this,"password"),name:"密码",placeholder:"\r 由数组或字母组成",data:this.state.result.password}),o.default.createElement("br",null),o.default.createElement(l.default,{handleInputChange:this.handleInputChange.bind(this,"passwordAgain"),name:"再次确认密码",placeholder:"\r 要跟楼上一样",data:this.state.result.passwordAgain}),o.default.createElement("br",null),o.default.createElement("div",{className:"ta-c pt16"},o.default.createElement("button",{type:"submit",className:"btn-n plr32 ptb6",onClick:this.handleFormConfirm.bind(this)},"确认")))))}}]),t}();t.default=d},xsyd:function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n("q1tI"),o=function(e){return e&&e.__esModule?e:{default:e}}(i);var u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":r(t))&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":r(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.Component),a(t,[{key:"handleValid",value:function(e,t,n){return e||void 0===e?t:n}},{key:"render",value:function(){var e=this.props,t=e.handleInputChange,n=e.data,r=e.name,a=e.placeholder,i=e.btnText,u=e.handleBtnClick;return o.default.createElement("div",{className:"input"},o.default.createElement("label",{htmlFor:r+"register",className:"fs12 c-grey"},r),o.default.createElement("br",null),o.default.createElement("div",{className:"search-box-normalize p-r",style:this.handleValid(n.isValid,{borderColor:"rgba(0, 0, 0, 0.12)"},{borderColor:"#e74c3c"})},o.default.createElement("input",{id:r+"register",onChange:t,type:"email",className:"input input-normal w288",placeholder:a,maxLength:"24",required:!0}),o.default.createElement("button",{type:"button",className:"btn-n ptb6 plr16 search-btn",onClick:u},i)),o.default.createElement("br",null),o.default.createElement("span",{className:"input-ps fs12",style:this.handleValid(n.isValid,{opacity:"0"},{opacity:"1"})},n.message.map(function(e){return e+" "})))}}]),t}();u.defaultProps={data:{message:[]}},t.default=u}}]);
//# sourceMappingURL=3.ef78035f0a7d60f74413.js.map