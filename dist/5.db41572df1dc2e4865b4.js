(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"8DLt":function(e,t,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=n("q1tI"),c=a(u),o=a(n("IujW"));function a(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":i(t))&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={title:"",content:"",id:""},n.params=new URLSearchParams(location.search),n.artId=n.params.get("id")||"",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":i(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.Component),r(t,[{key:"componentWillMount",value:function(){}},{key:"componentDidMount",value:function(){if(this.artId){var e=this.props.fetchData;e&&e(this.artId)}}},{key:"componentWillReceiveProps",value:function(e){var t=e.item,n=t.title,i=t.content,r=t.id;this.setState({title:n,content:i,id:r})}},{key:"shouldComponentUpdate",value:function(e,t){return!0}},{key:"componentWillUpdate",value:function(e){}},{key:"componentDidUpdate",value:function(){}},{key:"handleTitleChange",value:function(e){this.setState({title:e.target.value})}},{key:"handleInputChange",value:function(e){this.setState({content:e.target.value})}},{key:"checkData",value:function(e){e.preventDefault();var t=this.props,n=t.handlePublicClick,i=t.handleClickUpdate;this.state.title&&this.state.content&&(this.artId?i(this.state):n(this.state))}},{key:"render",value:function(){return c.default.createElement("div",null,c.default.createElement("div",{className:"d-f editor-tool"},c.default.createElement("input",{type:"text",onChange:this.handleTitleChange.bind(this),className:"input w-full input-normal bg-w",value:this.state.title,maxLength:"50",placeholder:"Title",required:!0}),c.default.createElement("button",{className:"tag-text plr16 s0",onClick:this.checkData.bind(this)},"发布文章")),c.default.createElement("div",{class:"stretching-column"},c.default.createElement("div",{class:"left"},c.default.createElement("div",{class:"resize-bar"}),c.default.createElement("div",{class:"resize-line"}),c.default.createElement("div",{class:"resize-content"},c.default.createElement("textarea",{placeholder:"# Press something what you think......",className:"textarea",autoFocus:!0,value:this.state.content,onChange:this.handleInputChange.bind(this),required:!0}))),c.default.createElement("div",{class:"right"},c.default.createElement(o.default,{source:this.state.content}))))}}]),t}();l.defaultProps={item:{id:"",title:"",content:"# Loding..."}},t.default=l},KKIq:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("/MKj"),r=n("Kgb3"),u=n("dLnk"),c=function(e){return e&&e.__esModule?e:{default:e}}(n("8DLt"));t.default=(0,i.connect)(function(e){return{item:e.articleDetailReducer.item}},function(e){return{handlePublicClick:function(t){return e((0,r.publishArticle)(t))},handleClickUpdate:function(t){return e((0,r.putArticle)(t))},fetchData:function(t){return e((0,u.fetchArticleOne)(t))}}})(c.default)},Kgb3:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.putArticle=t.publishArticle=void 0;var i=function(e){return e&&e.__esModule?e:{default:e}}(n("LpSC")),r=n("vKzh"),u=n("NRnq");var c=function(e){return{type:"PUBLIC_ARTICLE_ERROR",error:e}},o=function(e){return{type:"UPDATE_ARTICLE_ERROR",error:e}};t.publishArticle=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t){(0,i.default)(__API__.articleEdit,{method:"POST",credentials:"include",body:JSON.stringify(e)}).then(function(e){return e.json()}).then(function(e){e.error?(t(c(e)),t((0,r.pushInQueue)({info:"No Access",flag:"hint"}))):(t(function(e){return{type:"PUBLIC_ARTICLE_SUCCESS",info:e}}(e)),t((0,r.pushInQueue)({info:"Publish Article Success",flag:"success"})))}).catch(function(e){t(c(e)),t((0,r.pushInQueue)({info:"Internet Error",flag:"warning"}))})}},t.putArticle=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t){(0,i.default)(__API__.articleEdit,{method:"PUT",credentials:"include",body:JSON.stringify(e)}).then(function(e){return e.json()}).then(function(e){e.error?(t(o(e)),t((0,r.pushInQueue)({info:"No Access",flag:"hint"}))):(t(function(e){return{type:"UPDATE_ARTICLE_SUCCESS",info:e}}(e)),t((0,r.pushInQueue)({info:"Update Article Success",flag:"success"})))}).catch(function(e){t(o(e)),t((0,r.pushInQueue)({info:"Internet Error",flag:"warning"}))})}};(0,u.addReducer)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isPublish:!1,isUpdate:!1},t=arguments[1];switch(t.type){case"PUBLIC_ARTICLE_SUCCESS":return Object.assign({},e,{isPublish:!0,info:t.info});case"PUBLIC_ARTICLE_ERROR":return Object.assign({},e,{isPublish:!1,info:t.info});case"UPDATE_ARTICLE_SUCCESS":return Object.assign({},e,{isUpdate:!0,info:t.info});case"UPDATE_ARTICLE_ERROR":return Object.assign({},e,{isUpdate:!1,info:t.info});default:return e}},"articlePublicReducer")},dLnk:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deleteArticleOne=t.fetchArticleOne=void 0;var i=function(e){return e&&e.__esModule?e:{default:e}}(n("LpSC")),r=n("vKzh"),u=n("NRnq");t.fetchArticleOne=function(e){var t=__API__.articleOnce+e;return function(e){(0,i.default)(t,{method:"GET"}).then(function(e){return e.json()}).then(function(t){e(function(e){return{type:"RECEIVE_DETAIL_DATA",item:e,isFetching:!1}}(t))}).catch(function(e){})}},t.deleteArticleOne=function(e){var t=__API__.articleOnce+e;return function(e){(0,i.default)(t,{method:"DELETE",credentials:"include"}).then(function(e){return e.json()}).then(function(t){t.error?e((0,r.pushInQueue)({info:"No Access",flag:"hint"})):(e((0,r.pushInQueue)({info:"Delete article success",flag:"success"})),e({type:"DELETE_ARTICLE_SUCCESS"}))}).catch(function(t){e((0,r.pushInQueue)({info:"Place check your Internet",flag:"warning"}))})}};(0,u.addReducer)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isFetching:!1},t=arguments[1];switch(t.type){case"RECEIVE_DETAIL_DATA":return Object.assign({},e,{isFetching:!1,item:t.item});case"DELETE_ARTICLE_SUCCESS":default:return e}},"articleDetailReducer")}}]);
//# sourceMappingURL=5.db41572df1dc2e4865b4.js.map