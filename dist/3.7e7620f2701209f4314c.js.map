{"version":3,"sources":["webpack:///./src/slucky/src/register/display-validInput.jsx","webpack:///./src/slucky/src/register/highorder-register.jsx","webpack:///./src/slucky/src/register/data-register.jsx","webpack:///./src/slucky/src/lib/validator_es5.js","webpack:///./src/slucky/src/register/display-register.jsx","webpack:///./src/slucky/src/register/display-validSearchInput.jsx"],"names":["_react","__webpack_require__","o","e","__esModule","default","u","i","ValidInput","t","TypeError","ReferenceError","r","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","Component","isValid","initial","trigger","_props","this","props","handleInputChange","data","name","placeholder","_react2","createElement","className","htmlFor","id","onChange","type","maxLength","style","handleValid","borderColor","required","opacity","str","message","_reactRedux","_displayRegister","_dataRegister","connect","state","dispatch","handleVerifyCodeSend","email","verifyEmail","registerConfirm","register","Register","_isomorphicFetch","_dataMessage","_store","pushInQueue","info","flag","_isomorphicFetch2","__API__","postVerifyEmail","method","credentials","body","JSON","then","json","error","verifyEmailSuccess","catch","err","postRegister","registerSuccess","addReducer","arguments","length","action","assign","k+YS","n","defineProperty","validator","config","types","result","getConfig","validate","x","hasOwnProperty","val","res","validateOne","checkerList","key","map","index","call","instruction","push","bind","isSubmit","isEmpty","isName","test","isEmail","isPw","isPwAgain","password","isValidString","isNaN","m","_validator_es","_displayValidInput","_displayValidSearchInput","_reactAddonsCssTransitionGroup","_classCallCheck","_this","_possibleConstructorReturn","getPrototypeOf","emailVerifyCode","passwordAgain","tar","setState","_reactAddonsCssTransitionGroup2","transitionName","transitionAppear","transitionAppearTimeout","transitionEnter","transitionLeave","_displayValidSearchInput2","btnText","handleBtnClick","handleEmailSend","_displayValidInput2","onClick","handleFormConfirm","validSearchInput"],"mappings":"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","file":"3.7e7620f2701209f4314c.js","sourcesContent":["import React, {\n\tComponent,\n\tPropTypes\n} from 'react'\n\nclass ValidInput extends Component {\n\n\thandleValid(isValid, initial, trigger) {\n\t\tif (isValid || isValid === undefined) return initial\n\t\telse return trigger\n\t}\n\trender() {\n\t\tconst {\n\t\t\thandleInputChange,\n\t\t\tdata,\n\t\t\tname,\n\t\t\tplaceholder\n\t\t} = this.props\n\t\treturn (\n\t\t\t<div className=\"input pt8\">\n\t\t\t\t<label htmlFor={name+\"register\"} className=\"fs12 c-grey\">{name}</label>\n\t\t\t    <br/>\n\t\t        <input id={name+\"register\"} onChange={handleInputChange} type=\"text\" className=\"input-normal w288\"  placeholder={placeholder} maxLength=\"32\" style={this.handleValid(data.isValid,{'borderColor':'rgba(0, 0, 0, 0.12)'},{'borderColor':'#e74c3c'})} required/>\n\t\t\t    <br/>\n\t\t\t    <span className=\"input-ps fs12\" style={this.handleValid(data.isValid,{'opacity':'0'},{'opacity':'1'})}>{data.message.map((str)=>(str+\" \"))}</span>\n\t        </div>\n\t\t)\n\t}\n}\n\nValidInput.defaultProps = {\n\tdata: {\n\t\tmessage: []\n\t}\n}\n\nexport default ValidInput","import {\r\n\tconnect\r\n} from 'react-redux'\r\nimport Register from './display-register'\r\nimport {\r\n\tverifyEmail,\r\n\tregister\r\n} from './data-register'\r\n\r\nconst mapStateToProps = (state) => {\r\n\treturn {}\r\n}\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\thandleVerifyCodeSend: (email) => dispatch(verifyEmail({\r\n\t\t\temail: email\r\n\t\t})),\r\n\t\tregisterConfirm: (data) => dispatch(register(data))\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Register)\r\n","// let state = {\r\n// \tverifyEmail: \"\",\r\n// \tinfo: \"\"\r\n// }\r\nimport fetch from 'isomorphic-fetch'\r\nimport {\r\n\tpushInQueue\r\n} from '../message/data-message'\r\nimport {\r\n\taddReducer\r\n} from '../store'\r\n\r\nconst verifyEmailSuccess = (data) => {\r\n\treturn {\r\n\t\ttype: \"VERIFY_EMAIL_SUCCESS\",\r\n\t\tinfo: data\r\n\t}\r\n}\r\n\r\nconst registerSuccess = (data) => {\r\n\treturn {\r\n\t\ttype: \"REGISTER_SUCCESS\",\r\n\t\tinfo: data\r\n\t}\r\n}\r\n\r\nexport const verifyEmail = (data) => {\r\n\treturn dispatch => {\r\n\t\tdispatch(pushInQueue({\r\n\t\t\tinfo: \"邮件发送中\",\r\n\t\t\tflag: \"hint\"\r\n\t\t}))\r\n\t\tfetch(__API__.postVerifyEmail, {\r\n\t\t\tmethod: 'POST',\r\n\t\t\tcredentials: \"include\",\r\n\t\t\tbody: JSON.stringify(data)\r\n\t\t}).then(data => data.json()).then(data => {\r\n\t\t\tconsole.log(data)\r\n\t\t\tif (data.error) {\r\n\t\t\t\tdispatch(pushInQueue({\r\n\t\t\t\t\tinfo: \"请确认邮箱是否正确或请查看邮箱里的验证码\",\r\n\t\t\t\t\tflag: \"hint\"\r\n\t\t\t\t}))\r\n\t\t\t} else {\r\n\t\t\t\tdispatch(verifyEmailSuccess(data))\r\n\t\t\t\tdispatch(pushInQueue({\r\n\t\t\t\t\tinfo: \"发送成功，请查看邮箱里的验证码\",\r\n\t\t\t\t\tflag: \"success\"\r\n\t\t\t\t}))\r\n\r\n\t\t\t}\r\n\t\t}).catch(err => {\r\n\t\t\tif (err) throw err\r\n\t\t\tdispatch(pushInQueue({\r\n\t\t\t\tinfo: \"请网络检查网络连接\",\r\n\t\t\t\tflag: \"warning\"\r\n\t\t\t}))\r\n\r\n\t\t})\r\n\t}\r\n}\r\n\r\nexport const register = (data) => {\r\n\tconsole.log(\"REGISTER\")\r\n\tconsole.log(data)\r\n\treturn dispatch => fetch(__API__.postRegister, {\r\n\t\tmethod: 'POST',\r\n\t\tcredentials: \"include\",\r\n\t\tbody: JSON.stringify(data)\r\n\t}).then(data => data.json()).then(data => {\r\n\t\tconsole.log(data)\r\n\t\tif (data.error) {\r\n\t\t\tdispatch(pushInQueue({\r\n\t\t\t\tinfo: data.error,\r\n\t\t\t\tflag: \"hint\"\r\n\t\t\t}))\r\n\t\t} else {\r\n\t\t\tdispatch(registerSuccess(data))\r\n\t\t\tdispatch(pushInQueue({\r\n\t\t\t\tinfo: \"恭喜，注册成功\",\r\n\t\t\t\tflag: \"success\"\r\n\t\t\t}))\r\n\r\n\t\t\t// window.location.href = \"http://www.brandf.cn/\"\r\n\t\t}\r\n\t}).catch(err => {\r\n\t\tif (err) throw err\r\n\t\tdispatch(pushInQueue({\r\n\t\t\tinfo: \"请网络检查网络连接\",\r\n\t\t\tflag: \"warning\"\r\n\t\t}))\r\n\r\n\t})\r\n}\r\n\r\nconst registerReducer = (state = {}, action) => {\r\n\tswitch (action.type) {\r\n\t\tcase \"VERIFY_EMAIL_SUCCESS\":\r\n\t\t\treturn Object.assign({}, state, {\r\n\t\t\t\tinfo: action.info\r\n\t\t\t})\r\n\t\tcase \"REGISTER_SUCCESS\":\r\n\t\t\treturn Object.assign({}, state, {\r\n\t\t\t\tinfo: action.info\r\n\t\t\t})\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}\r\n\r\naddReducer(registerReducer, 'registerReducer')\r\n","// var data = {\n// \tname: test,\n// \tpw: 123,\n// \temail: \"asd@qq.com\"\n// }\n\n// vaildator.config = {\n// \tname: ['isNum'],\n// \tpw: ['isPw'],\n// \temail: ['isEmail']\n// }\n\n// validator.validate(data)\n\nvar validator = {\n\t\tconfig: {},\n\t\ttypes: {},\n\t\tresult: {},\n\t\tdata: {},\n\t\tgetConfig: function() {\n\t\t\treturn this.config\n\t\t},\n\t\tvalidate: function(data) {\n\t\t\tconsole.log(data)\n\t\t\tconsole.log(this.config)\n\t\t\tthis.data = data\n\t\t\tthis.result = {};\n\t\t\tfor (var x in data) {\n\t\t\t\tif (data.hasOwnProperty(x)) {\n\t\t\t\t\tvar val = data[x]\n\t\t\t\t\tvar res = this.validateOne(x, val)\n\t\t\t\t\tif (res) {\n\t\t\t\t\t\tthis.result[x] = res\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tconsole.log(this.result)\n\t\t\treturn this.result\n\t\t},\n\t\tvalidateOne: function(x, val) {\n\t\t\tvar checkerList = this.config[x]\n\t\t\tif (!checkerList) {\n\t\t\t\treturn false\n\t\t\t}\n\t\t\tvar result = {\n\t\t\t\tkey: x,\n\t\t\t\tisValid: true,\n\t\t\t\tmessage: []\n\t\t\t}\n\n\t\t\t// 遍历检查器\n\t\t\tcheckerList.map(function(name, index) {\n\t\t\t\tvar checker = this.types[name].validate\n\n\t\t\t\t// 只处理非法的情况\n\t\t\t\tif (!checker.call(this, val)) {\n\t\t\t\t\tvar instruction = this.types[name].instruction\n\t\t\t\t\tresult.isValid = false\n\t\t\t\t\tresult.message.push(instruction)\n\t\t\t\t}\n\t\t\t}.bind(this))\n\t\t\treturn result\n\t\t},\n\t\t// 最终验证\n\t\tisSubmit: function() {\n\t\t\tfor (var x in this.config) {\n\t\t\t\tif (this.result[x] == undefined || !this.result[x].isValid) return false\n\t\t\t}\n\t\t\treturn true\n\t\t}\n\t}\n\t// 检查处理器\nvalidator.types.isEmpty = {\n\tvalidate: function(value) {\n\t\treturn value !== \"\"\n\t},\n\tinstruction: \"不能为空\"\n}\n\nvalidator.types.isName = {\n\tvalidate: function(value) {\n\t\treturn /^[\\u4E00-\\u9FA5A-Za-z0-9_]{1,10}$/.test(value)\n\t},\n\tinstruction: \"十个字以内，不能包含特殊字符\"\n}\n\nvalidator.types.isEmail = {\n\tvalidate: function(value) {\n\t\treturn /^\\w+([-+.]\\w+)*@\\w+([-.]\\w+)*\\.\\w+([-.]\\w+)*$/.test(value)\n\t},\n\tinstruction: \"邮箱格式不正确\"\n}\n\nvalidator.types.isPw = {\n\tvalidate: function(value) {\n\t\treturn /^[!@#$%^&*_A-Za-z0-9]{8,15}$/.test(value)\n\t},\n\tinstruction: \"由数组，字母，_@#$等组成，不少于8位\"\n}\n\nvalidator.types.isPwAgain = {\n\tvalidate: function(value) {\n\t\tconsole.log(this)\n\t\tif (this.data.password)\n\t\t\treturn this.data.password == value\n\t\telse return false\n\t},\n\tinstruction: \"重复输入的密码不相同\"\n}\n\nvalidator.types.isValidString = {\n\tvalidate: function(value) {\n\t\treturn !isNaN(value)\n\t},\n\tinstruction: \"invail Number value\"\n}\n\nexport default validator\n\n// {\n// \tname: {\n// \t\tkey: name,\n// \t\tisValid: true,\n// \t\tmessage: []\n// \t}\n// }","import React, {\r\n\tComponent\r\n} from 'react'\r\nimport validator from '../lib/validator_es5'\r\nimport ValidInput from './display-validInput'\r\nimport ValidSearchInput from './display-validSearchInput'\r\nimport ReactCSSTransitionGroup from 'react-addons-css-transition-group'\r\n\r\nclass Register extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props)\r\n\t\tthis.state = {\r\n\t\t\tdata: {\r\n\t\t\t\temail: \"\",\r\n\t\t\t\temailVerifyCode: \"\",\r\n\t\t\t\tname: \"\",\r\n\t\t\t\tpassword: \"\",\r\n\t\t\t\tpasswordAgain: \"\"\r\n\t\t\t},\r\n\t\t\tresult: {}\r\n\t\t}\r\n\t\tvalidator.config = {\r\n\t\t\temail: ['isEmpty', 'isEmail'],\r\n\t\t\temailVerifyCode: ['isEmpty'],\r\n\t\t\tname: ['isName', 'isEmpty'],\r\n\t\t\tpassword: ['isEmpty', 'isPw'],\r\n\t\t\tpasswordAgain: ['isEmpty', 'isPwAgain']\r\n\t\t}\r\n\t\tthis.registerConfirm = this.props.registerConfirm.bind(this)\r\n\t\tthis.handleVerifyCodeSend = this.props.handleVerifyCodeSend.bind(this)\r\n\t}\r\n\thandleInputChange(key, e) {\r\n\t\tlet tar = this.state.data\r\n\t\ttar[key] = e.target.value\r\n\t\tthis.setState({\r\n\t\t\tdata: tar\r\n\t\t})\r\n\t}\r\n\thandleFormConfirm(e) {\r\n\t\te.preventDefault()\r\n\t\tvar data = this.state.data\r\n\t\tvar result = validator.validate(data)\r\n\t\tthis.setState({\r\n\t\t\tresult: result\r\n\t\t})\r\n\t\tconsole.log(this.state.result)\r\n\t\tif (validator.isSubmit()) {\r\n\t\t\tthis.registerConfirm(this.state.data)\r\n\t\t}\r\n\t}\r\n\thandleEmailSend() {\r\n\t\tvar email = this.state.data.email\r\n\t\tvar res = validator.validateOne('email', email)\r\n\t\tthis.setState({\r\n\t\t\tresult: {\r\n\t\t\t\temail: res\r\n\t\t\t}\r\n\t\t})\r\n\t\tif (res.isValid) {\r\n\t\t\tthis.handleVerifyCodeSend(email)\r\n\t\t}\r\n\t}\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"register-container\">\r\n\t\t\t\t<div className=\"register-mark\"></div>\r\n\t\t\t\t<ReactCSSTransitionGroup\r\n\t\t\t\t\t\t\t\ttransitionName=\"example\"\r\n\t\t\t\t\t\t\t\ttransitionAppear={true}\r\n\t\t\t\t\t\t\t\ttransitionAppearTimeout={500}\r\n\t\t\t\t\t\t\t\ttransitionEnter={false}\r\n\t\t\t\t\t\t\t\ttransitionLeave={false}>\r\n\t\t\t\t\t<form className=\"paper shadow p32 register-item svgMutiLine p-r\" key=\"registerForm\">\r\n\t\t\t\t\t\t{/* <svg\r\n\t\t\t\t\t\t\tclassName=\"btn-svgMutiLine\"\r\n\t\t\t\t\t\t\tviewBox=\"0 0 240 360\"\r\n\t\t\t\t\t\t\tversion=\"1.1\"\r\n\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\">\r\n\t\t\t\t\t\t\t<rect className=\"shape\"></rect>\r\n    \t\t\t\t\t</svg> */}\r\n\t\t\t\t\t\t<p className=\"ta-c mb4 mt0\"><strong>注册</strong></p>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<ValidSearchInput btnText=\"发送\" handleInputChange={this.handleInputChange.bind(this,'email')} handleBtnClick={this.handleEmailSend.bind(this)} name='邮箱' placeholder=\"\r\n\t\t\t\t\t\t常用邮箱\" data={this.state.result['email']}/>\r\n\t\t\t\t        <br/>\r\n\r\n\t\t\t\t\t\t<ValidInput handleInputChange={this.handleInputChange.bind(this,'emailVerifyCode')} name='验证码' placeholder=\"\r\n\t\t\t\t\t\t输入邮箱里的验证码\" data={this.state.result['emailVerifyCode']}/>\r\n\t\t\t\t        <br/>\r\n\r\n\t\t\t\t        <ValidInput handleInputChange={this.handleInputChange.bind(this,'name')} name='昵称' placeholder=\"\r\n\t\t\t\t\t\t不能含有标点\" data={this.state.result['name']}/>\r\n\t\t\t\t        <br/>\r\n\r\n\r\n\t\t\t\t        <ValidInput handleInputChange={this.handleInputChange.bind(this,'password')} name='密码' placeholder=\"\r\n\t\t\t\t\t\t由数组或字母组成\" data={this.state.result['password']}/>\r\n\t\t\t\t        <br/>\r\n\r\n\t\t\t\t        <ValidInput handleInputChange={this.handleInputChange.bind(this,'passwordAgain')} name='再次确认密码' placeholder=\"\r\n\t\t\t\t\t\t要跟楼上一样\" data={this.state.result['passwordAgain']}/>\r\n\t\t\t\t        <br/>\r\n\r\n\t\t\t\t        <div className=\"ta-c pt16\">\r\n\t\t\t\t\t\t\t<button type=\"submit\" className=\"btn-n plr32 ptb6\" onClick={this.handleFormConfirm.bind(this)}>确认</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</form>\r\n\t\t\t\t</ReactCSSTransitionGroup>\r\n\t\t\t</div>\r\n\r\n\t\t)\r\n\t}\r\n}\r\n\r\nexport default Register\r\n","import React, {\r\n\tComponent\r\n} from 'react'\r\n\r\nclass validSearchInput extends Component {\r\n\thandleValid(isValid, initial, trigger) {\r\n\t\tif (isValid || isValid === undefined) return initial\r\n\t\telse return trigger\r\n\t}\r\n\trender() {\r\n\t\tconst {\r\n\t\t\thandleInputChange,\r\n\t\t\tdata,\r\n\t\t\tname,\r\n\t\t\tplaceholder,\r\n\t\t\tbtnText,\r\n\t\t\thandleBtnClick\r\n\t\t} = this.props\r\n\t\treturn (\r\n\t\t\t<div className=\"input\">\r\n\t\t        <label htmlFor={name+\"register\"} className=\"fs12 c-grey\">{name}</label>\r\n\t\t\t    <br/>\r\n\t\t\t\t<div className=\"search-box-normalize p-r\" style={this.handleValid(data.isValid,{'borderColor':'rgba(0, 0, 0, 0.12)'},{'borderColor':'#e74c3c'})}>\r\n\t\t\t\t    <input id={name+\"register\"} onChange={handleInputChange} type=\"email\" className=\"input input-normal w288\" placeholder={placeholder} maxLength=\"24\" required/>\r\n\t\t\t\t    <button type=\"button\" className=\"btn-n ptb6 plr16 search-btn\" onClick={handleBtnClick}>{btnText}</button>\r\n\t\t\t\t</div>\t\t            \r\n\t\t\t\t<br/>\r\n\t\t\t    <span className=\"input-ps fs12\" style={this.handleValid(data.isValid,{'opacity':'0'},{'opacity':'1'})}>{data.message.map((str)=>(str+\" \"))}</span>\r\n\t\t    </div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nvalidSearchInput.defaultProps = {\r\n\tdata: {\r\n\t\tmessage: []\r\n\t}\r\n}\r\n\r\nexport default validSearchInput\r\n"],"sourceRoot":""}